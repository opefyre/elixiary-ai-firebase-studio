/* Mobile PWA Fixes - iOS Safe Area and Viewport Handling */

/* iOS Safe Area Support */
@supports (padding: max(0px)) {
  .ios-safe-area-top {
    padding-top: max(env(safe-area-inset-top), 0px);
  }
  
  .ios-safe-area-bottom {
    padding-bottom: max(env(safe-area-inset-bottom), 0px);
  }
  
  .ios-safe-area-left {
    padding-left: max(env(safe-area-inset-left), 0px);
  }
  
  .ios-safe-area-right {
    padding-right: max(env(safe-area-inset-right), 0px);
  }
}

/* Fix for iOS PWA navbar positioning */
@media screen and (max-width: 768px) {
  /* Ensure the navbar is always at the very top on mobile */
  .mobile-navbar-fix {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 50;
    /* Extend behind status bar on iOS PWA */
    padding-top: env(safe-area-inset-top, 0px);
    /* Make navbar extend to very top */
    margin-top: 0;
  }
  
  /* iOS PWA specific - extend navbar behind status bar */
  .ios-pwa .mobile-navbar-fix {
    /* Remove any top padding/margin to extend behind status bar */
    padding-top: 0;
    margin-top: 0;
    /* Add padding to content inside navbar instead */
  }
  
  .ios-pwa .mobile-navbar-fix .container {
    /* Add safe area padding to the content inside navbar */
    padding-top: env(safe-area-inset-top, 0px);
  }
  
  /* Add padding to body to account for fixed navbar */
  .mobile-body-padding {
    padding-top: calc(4rem + env(safe-area-inset-top, 0px));
  }
  
  /* Fix for content appearing above navbar when scrolling */
  .mobile-content-container {
    position: relative;
    z-index: 1;
  }
}

/* iOS PWA specific fixes */
@supports (-webkit-touch-callout: none) {
  /* iOS Safari specific styles */
  .ios-pwa-fix {
    /* Prevent content from appearing behind status bar */
    padding-top: env(safe-area-inset-top, 0px);
  }
  
  /* Fix for iOS viewport height issues */
  .ios-viewport-fix {
    min-height: 100vh;
    min-height: -webkit-fill-available;
  }
  
  /* Fix for iOS scroll bounce */
  .ios-scroll-fix {
    overscroll-behavior: none;
    -webkit-overflow-scrolling: touch;
  }
  
  /* Critical fix for iOS PWA status bar overlap */
  .ios-pwa .mobile-navbar-fix {
    /* Force navbar to extend behind status bar */
    top: 0 !important;
    margin-top: 0 !important;
    padding-top: 0 !important;
    /* Make sure navbar background covers status bar area */
    background: var(--background);
  }
  
  .ios-pwa .mobile-navbar-fix .container {
    /* Add safe area padding to content inside navbar */
    padding-top: max(env(safe-area-inset-top, 0px), 0px);
    /* Ensure content doesn't overlap with status bar */
    min-height: calc(4rem + env(safe-area-inset-top, 0px));
  }
}

/* Android PWA fixes */
@media screen and (max-width: 768px) and (min-resolution: 2dppx) {
  .android-pwa-fix {
    /* Android specific PWA fixes */
    -webkit-tap-highlight-color: transparent;
  }
}

/* General mobile PWA improvements */
@media screen and (max-width: 768px) {
  /* Prevent zoom on input focus */
  input, textarea, select {
    font-size: 16px;
  }
  
  /* Improve touch targets */
  button, a, [role="button"] {
    min-height: 44px;
    min-width: 44px;
  }
  
  /* Fix for mobile viewport units */
  .mobile-vh-fix {
    height: 100vh;
    height: calc(var(--vh, 1vh) * 100);
  }
}
